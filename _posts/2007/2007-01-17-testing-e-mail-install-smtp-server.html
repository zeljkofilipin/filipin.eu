---
tags:  TODO
title: 'Testing E-mail: Install SMTP Server'
---
<p>I will be writing about testing e-mail functionality of web applications in the next post or two. If you are serious about testing e-mail functionality, the first step is to install SMTP server at your machine. This is tested on Windows XP Professional, service pack 2. You will need Windows operating system CD.</p>
<p>Make sure you are logged in as administrator, or start Add or Remove Programs as administrator:</p>
<ul>
<li>go to Control Panel</li>
<li>highlight Add or Remove Programs</li>
<li>hold Shift key at keyboard</li>
<li>press right mouse key</li>
<li>select Run as...</li>
<li>select administrator account</li>
<li>enter password if necessary</li>
<li>press button OK</li>
</ul>
<p>At Add or Remove Programs:</p>
<ul>
<li>click Add/Remove Windows Components</li>
<li>select Internet Information Services (IIS)</li>
<li>click Details...</li>
<li>check SMTP service check box</li>
<li>Common Files, Internet Information Services Snap-in and World Wide Web Service will automatically select</li>
<li>do not deselect anything</li>
<li>finish installation</li>
<li>you will be prompted to insert Windows operating system CD</li>
</ul>
<p>I am using Ruby's <a href="http://www.ruby-doc.org/stdlib/libdoc/net/smtp/rdoc/index.html">Net::SMTP</a> library for sending e-mail. I tried to send an e-mail and got this exception:</p>
<p><code>Exception: 550 5.7.1 Unable to relay for community@site</code></p>
<p>You need to change a setting or two:</p>
<ul>
<li>go to Internet Information Services (in Administrative Tools)</li>
<li>right click Default SMTP Virtual Server</li>
<li>click Properties</li>
<li>select Access tab (second from the left)</li>
<li>click button Relay... (bottom right)</li>
<li>select Only the list below radio button</li>
<li>click button Add...</li>
<li>add 127.0.0.1</li>
</ul>
<p>Many thanks to my colleague who helped me to install and adjust my SMTP server.</p>
